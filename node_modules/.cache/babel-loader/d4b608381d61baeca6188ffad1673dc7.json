{"ast":null,"code":"import React, { useState, useEffect } from 'react';\nimport axios from 'axios'; // custom hook for performing get requests\n\nexport const useFetch = (searchMethod, searchValue) => {\n  const getAll = 'http://localhost:5000/api/students';\n  const getById = 'http://localhost:5000/api/student/' + searchValue;\n  let url = null; // allows us to use same hook for different get requests and parameters\n\n  switch (searchMethod) {\n    case 'getById':\n      url = getById;\n      break;\n\n    case 'getAll':\n      url = getAll;\n      break;\n\n    default:\n      url = null;\n  } // set our states for inital empty data arry of students, and loading boolean\n\n\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true); // useEffect contains our Axios API call, with error handling and finally block\n\n  useEffect(() => {\n    const fetchData = async function () {\n      try {\n        setLoading(true);\n        const response = await axios.get(url);\n\n        if (response.status === 200) {\n          setData(response.data);\n        }\n      } catch (error) {\n        throw error;\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData(); // the [] contains states that we check for change, if one state in the [] changes the effect executes\n  }, [url]);\n  return {\n    loading,\n    data\n  };\n};\nexport function deleteStudent(studentId) {\n  let url = 'http://localhost:/api/delete/student/' + studentId;\n  return axios.delete(url);\n}\nexport function createStudent(student) {\n  return axios.post('http://localhost:8080/api/add/student', student);\n}\nexport function updateStudent(student) {\n  return axios.put('http://localhost:8080/api/update/student', student);\n}","map":{"version":3,"sources":["C:/React Workspace/students/src/service/StudentService.jsx"],"names":["React","useState","useEffect","axios","useFetch","searchMethod","searchValue","getAll","getById","url","data","setData","loading","setLoading","fetchData","response","get","status","error","deleteStudent","studentId","delete","createStudent","student","post","updateStudent","put"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;;AACA,OAAO,MAAMC,QAAQ,GAAG,CAACC,YAAD,EAAeC,WAAf,KAA8B;AAElD,QAAMC,MAAM,GAAG,oCAAf;AACA,QAAMC,OAAO,GAAG,uCAAuCF,WAAvD;AACA,MAAIG,GAAG,GAAG,IAAV,CAJkD,CAMlD;;AACA,UAAQJ,YAAR;AACI,SAAK,SAAL;AAAgBI,MAAAA,GAAG,GAAGD,OAAN;AAChB;;AACA,SAAK,QAAL;AAAeC,MAAAA,GAAG,GAAGF,MAAN;AACf;;AACA;AAASE,MAAAA,GAAG,GAAG,IAAN;AALb,GAPkD,CAclD;;;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,IAAD,CAAtC,CAhBkD,CAkBlD;;AACAC,EAAAA,SAAS,CAAC,MAAK;AACX,UAAMY,SAAS,GAAG,kBAAkB;AAChC,UAAI;AACAD,QAAAA,UAAU,CAAC,IAAD,CAAV;AACA,cAAME,QAAQ,GAAG,MAAMZ,KAAK,CAACa,GAAN,CAAUP,GAAV,CAAvB;;AACA,YAAGM,QAAQ,CAACE,MAAT,KAAoB,GAAvB,EAA2B;AACvBN,UAAAA,OAAO,CAACI,QAAQ,CAACL,IAAV,CAAP;AACH;AACJ,OAND,CAME,OAAOQ,KAAP,EAAc;AACZ,cAAMA,KAAN;AACH,OARD,SAQS;AACLL,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,KAZD;;AAaAC,IAAAA,SAAS,GAdE,CAeX;AACH,GAhBQ,EAgBN,CAACL,GAAD,CAhBM,CAAT;AAiBA,SAAM;AAACG,IAAAA,OAAD;AAAUF,IAAAA;AAAV,GAAN;AACH,CArCM;AAsCN,OAAO,SAASS,aAAT,CAAuBC,SAAvB,EAAiC;AAErC,MAAIX,GAAG,GAAC,0CAAyCW,SAAjD;AACA,SAAOjB,KAAK,CAACkB,MAAN,CAAaZ,GAAb,CAAP;AACF;AACD,OAAO,SAASa,aAAT,CAAuBC,OAAvB,EAA+B;AAEnC,SAAOpB,KAAK,CAACqB,IAAN,CAAW,uCAAX,EAAmDD,OAAnD,CAAP;AAEF;AACD,OAAO,SAASE,aAAT,CAAuBF,OAAvB,EAA+B;AAEnC,SAAOpB,KAAK,CAACuB,GAAN,CAAU,0CAAV,EAAqDH,OAArD,CAAP;AAEF","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport axios from 'axios';\r\n\r\n// custom hook for performing get requests\r\nexport const useFetch = (searchMethod, searchValue) =>{\r\n\r\n    const getAll = 'http://localhost:5000/api/students';\r\n    const getById = 'http://localhost:5000/api/student/' + searchValue;\r\n    let url = null;\r\n\r\n    // allows us to use same hook for different get requests and parameters\r\n    switch (searchMethod) {\r\n        case 'getById': url = getById;\r\n        break;\r\n        case 'getAll': url = getAll;\r\n        break;\r\n        default: url = null;\r\n    }\r\n    // set our states for inital empty data arry of students, and loading boolean\r\n    const [data, setData] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // useEffect contains our Axios API call, with error handling and finally block\r\n    useEffect(()=> {\r\n        const fetchData = async function () {\r\n            try {\r\n                setLoading(true);\r\n                const response = await axios.get(url);\r\n                if(response.status === 200){\r\n                    setData(response.data);\r\n                }\r\n            } catch (error) {\r\n                throw error;\r\n            } finally{\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchData();\r\n        // the [] contains states that we check for change, if one state in the [] changes the effect executes\r\n    }, [url]);\r\n    return{loading, data};\r\n};\r\n export function deleteStudent(studentId){\r\n\r\n    let url='http://localhost:/api/delete/student/'+ studentId;\r\n    return axios.delete(url);\r\n }\r\n export function createStudent(student){\r\n\r\n    return axios.post('http://localhost:8080/api/add/student',student);\r\n  \r\n }\r\n export function updateStudent(student){\r\n\r\n    return axios.put('http://localhost:8080/api/update/student',student);\r\n  \r\n }\r\n \r\n\r\n "]},"metadata":{},"sourceType":"module"}